{
  "version": 3,
  "sources": ["empty-module:~/utils/cookies.server", "browser-route-module:/Users/chris/Projects/bookshelf/app/routes/index.tsx?browser", "../../../app/routes/index.tsx", "../../../app/components/books.tsx"],
  "sourcesContent": ["module.exports = {};", "export { default } from \"/Users/chris/Projects/bookshelf/app/routes/index.tsx\";", "import type { LoaderFunction } from '@remix-run/node';\nimport type { IBook } from '~/utils/types';\n\nimport { useLoaderData } from '@remix-run/react';\nimport Books from '~/components/books';\nimport { json } from '@remix-run/node';\nimport { getUserIdFromRequest } from '~/utils/cookies.server';\nimport { db } from '~/utils/db.server';\n\nexport interface IBooksData {\n\tbooks: Array<IBook>;\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst userId = await getUserIdFromRequest(request);\n\n\tif (!userId) {\n\t\tconst emptyData: IBooksData = {\n\t\t\tbooks: [],\n\t\t};\n\t\treturn json(emptyData);\n\t}\n\n\tconst data: IBooksData = {\n\t\tbooks: await db.book.findMany({\n\t\t\tselect: {\n\t\t\t\tid: true,\n\t\t\t\ttitle: true,\n\t\t\t\tusers: {\n\t\t\t\t\twhere: { userId },\n\t\t\t\t\tselect: {\n\t\t\t\t\t\treadAt: true,\n\t\t\t\t\t\treadingOrder: true,\n\t\t\t\t\t},\n\t\t\t\t\ttake: 1,\n\t\t\t\t},\n\t\t\t\tauthors: {\n\t\t\t\t\tselect: {\n\t\t\t\t\t\tauthor: { select: { id: true, name: true } },\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tseries: {\n\t\t\t\t\tselect: {\n\t\t\t\t\t\tname: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t}),\n\t};\n\n\treturn json(data);\n};\n\nexport default function Index() {\n\tconst loaderData = useLoaderData<IBooksData>();\n\n\treturn <Books loaderData={loaderData} />;\n}\n", "import type { IBooksData } from '~/routes';\n\ninterface IProps {\n\tloaderData: IBooksData;\n}\n\nexport default function Books({ loaderData }: IProps) {\n\tconst { books } = loaderData;\n\n\tconsole.log(loaderData);\n\n\treturn <div>{books.length > 0 && <div>Books!</div>}</div>;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA,WAAO,UAAU;AAAA;AAAA;;;ACAjB;;;ACAA;;;ACAA;AAMe,eAAe,EAAE,cAAsB;AACrD,QAAM,EAAE,UAAU;AAElB,UAAQ,IAAI;AAEZ,SAAO,oCAAC,OAAD,MAAM,MAAM,SAAS,KAAK,oCAAC,OAAD,MAAK;AAAA;;;ADLvC,qBAAqC;AACrC,gBAAmB;AA8CJ,iBAAiB;AAC/B,QAAM,aAAa;AAEnB,SAAO,oCAAC,OAAD;AAAA,IAAO;AAAA;AAAA;",
  "names": []
}
