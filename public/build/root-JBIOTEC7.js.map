{
  "version": 3,
  "sources": ["empty-module:./utils/cookies.server", "browser-route-module:/Users/chris/Projects/bookshelf/app/root.tsx?browser", "../../app/root.tsx", "../../app/components/nav.tsx"],
  "sourcesContent": ["module.exports = {};", "export { default, links, meta } from \"/Users/chris/Projects/bookshelf/app/root.tsx\";", "import type { LoaderFunction, MetaFunction } from '@remix-run/node';\nimport {\n\tLinks,\n\tLiveReload,\n\tMeta,\n\tOutlet,\n\tScripts,\n\tScrollRestoration,\n\tuseLoaderData,\n} from '@remix-run/react';\nimport { createContext, useEffect, useState } from 'react';\nimport Nav from './components/nav';\n\nimport styles from './styles/app.css';\nimport { userIdCookie } from './utils/cookies.server';\nimport type { Who } from './utils/types';\n\nexport const meta: MetaFunction = () => ({\n\tcharset: 'utf-8',\n\ttitle: 'Bookshelf',\n\tviewport: 'width=device-width,initial-scale=1',\n});\n\nexport function links() {\n\treturn [{ rel: 'stylesheet', href: styles }];\n}\n\ninterface IContext {\n\tisAuthed: boolean;\n\tuserId: Who | null;\n}\n\nfunction isWho(input: string): input is Who {\n\treturn input === 'chris' || input === 'kate';\n}\n\nexport default function App() {\n\tconst userId = useLoaderData<Who | null>();\n\n\tconst [context, setContext] = useState<IContext>({\n\t\tisAuthed: false,\n\t\tuserId: null,\n\t});\n\n\tuseEffect(() => {\n\t\tsetContext(c => ({ ...c, userId }));\n\t}, [userId]);\n\n\tasync function updateUserId(newUserId: string): Promise<void> {\n\t\tif (!isWho(newUserId)) return;\n\t\tsetContext(c => ({ ...c, userId: newUserId }));\n\t\tawait fetch(`/api/set-user/${newUserId}`);\n\t}\n\n\treturn (\n\t\t<html lang=\"en\">\n\t\t\t<head>\n\t\t\t\t<Meta />\n\t\t\t\t<Links />\n\t\t\t</head>\n\t\t\t<body>\n\t\t\t\t<div className=\"p-8 w-full\">\n\t\t\t\t\t<Nav userId={context.userId} updateUserId={updateUserId} />\n\t\t\t\t\t<Outlet />\n\t\t\t\t</div>\n\t\t\t\t<ScrollRestoration />\n\t\t\t\t<Scripts />\n\t\t\t\t<LiveReload />\n\t\t\t</body>\n\t\t</html>\n\t);\n}\n\nexport const loader: LoaderFunction = async ({ request }) => {\n\tconst cookieHeader = request.headers.get('Cookie');\n\treturn cookieHeader ? await userIdCookie.parse(cookieHeader) : null;\n};\n", "import type { Who } from '~/utils/types';\n\nimport type { ChangeEvent } from 'react';\n\ninterface IProps {\n\tuserId: Who | null;\n\tupdateUserId: (userId: string) => Promise<void>;\n}\n\nexport default function Nav({ userId, updateUserId }: IProps) {\n\tasync function handleChange(\n\t\te: ChangeEvent<HTMLSelectElement>,\n\t): Promise<void> {\n\t\tupdateUserId(e.target.value);\n\t}\n\n\treturn (\n\t\t<header className=\"w-full border-b-2 border-b-emerald-600 pb-8 mb-8\">\n\t\t\t<h1 className=\"text-4xl text-emerald-600 font-mono font-medium pb-4\">\n\t\t\t\tBookshelf\n\t\t\t</h1>\n\t\t\t<div className=\"text-xl\">\n\t\t\t\t<label htmlFor=\"userId\">Who are you?</label>\n\t\t\t\t<select\n\t\t\t\t\tid=\"userId\"\n\t\t\t\t\tvalue={userId ?? 'none'}\n\t\t\t\t\tonChange={handleChange}\n\t\t\t\t\tclassName=\"ml-2\"\n\t\t\t\t>\n\t\t\t\t\t<option disabled value=\"none\">\n\t\t\t\t\t\tPlease choose\n\t\t\t\t\t</option>\n\t\t\t\t\t<option value=\"kate\">Kate</option>\n\t\t\t\t\t<option value=\"chris\">Chris</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</header>\n\t);\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA,WAAO,UAAU;AAAA;AAAA;;;ACAjB;;;ACAA;AAUA,oBAAmD;;;ACVnD;AASe,aAAa,EAAE,QAAQ,gBAAwB;AAC7D,8BACC,GACgB;AAChB,iBAAa,EAAE,OAAO;AAAA;AAGvB,SACC,oCAAC,UAAD;AAAA,IAAQ,WAAU;AAAA,KACjB,oCAAC,MAAD;AAAA,IAAI,WAAU;AAAA,KAAuD,cAGrE,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACd,oCAAC,SAAD;AAAA,IAAO,SAAQ;AAAA,KAAS,iBACxB,oCAAC,UAAD;AAAA,IACC,IAAG;AAAA,IACH,OAAO,0BAAU;AAAA,IACjB,UAAU;AAAA,IACV,WAAU;AAAA,KAEV,oCAAC,UAAD;AAAA,IAAQ,UAAQ;AAAA,IAAC,OAAM;AAAA,KAAO,kBAG9B,oCAAC,UAAD;AAAA,IAAQ,OAAM;AAAA,KAAO,SACrB,oCAAC,UAAD;AAAA,IAAQ,OAAM;AAAA,KAAQ;AAAA;;;;;;ADnB3B,qBAA6B;AAGtB,IAAM,OAAqB,MAAO;AAAA,EACxC,SAAS;AAAA,EACT,OAAO;AAAA,EACP,UAAU;AAAA;AAGJ,iBAAiB;AACvB,SAAO,CAAC,EAAE,KAAK,cAAc,MAAM;AAAA;AAQpC,eAAe,OAA6B;AAC3C,SAAO,UAAU,WAAW,UAAU;AAAA;AAGxB,eAAe;AAC7B,QAAM,SAAS;AAEf,QAAM,CAAC,SAAS,cAAc,4BAAmB;AAAA,IAChD,UAAU;AAAA,IACV,QAAQ;AAAA;AAGT,+BAAU,MAAM;AACf,eAAW,OAAM,MAAK,GAAG;AAAA,KACvB,CAAC;AAEJ,8BAA4B,WAAkC;AAC7D,QAAI,CAAC,MAAM;AAAY;AACvB,eAAW,OAAM,MAAK,GAAG,QAAQ;AACjC,UAAM,MAAM,iBAAiB;AAAA;AAG9B,SACC,oCAAC,QAAD;AAAA,IAAM,MAAK;AAAA,KACV,oCAAC,QAAD,MACC,oCAAC,MAAD,OACA,oCAAC,OAAD,QAED,oCAAC,QAAD,MACC,oCAAC,OAAD;AAAA,IAAK,WAAU;AAAA,KACd,oCAAC,KAAD;AAAA,IAAK,QAAQ,QAAQ;AAAA,IAAQ;AAAA,MAC7B,oCAAC,QAAD,QAED,oCAAC,mBAAD,OACA,oCAAC,SAAD,OACA,oCAAC,YAAD;AAAA;",
  "names": []
}
